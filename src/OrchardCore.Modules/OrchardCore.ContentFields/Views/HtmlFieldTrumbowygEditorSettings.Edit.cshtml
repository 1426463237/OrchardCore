@model OrchardCore.ContentFields.ViewModels.TrumbowygSettingsViewModel
<style type="text/css">
    .CodeMirror {
        height: 100%;
    }
</style>
<div id="@Html.IdFor(m => m)" class="field-editor field-editor-trumbowyg">
    <div class="form-group row">
        <div class="col-lg">
            <label asp-for="Options">@T["Enter the trumbowyg editor options"]</label>
            <span class="hint">@T["Example"] <a href="https://alex-d.github.io/Trumbowyg/documentation/#button-pane" target="_blank">Documentation for Trumbowyg buttons</a></span>
            <textarea asp-for="Options" class="form-control" autofocus="autofocus"></textarea>
        </div>
    </div>
</div>

<script asp-name="codemirror" depends-on="admin" at="Foot"></script>
<script asp-name="codemirror-mode-javascript" at="Foot"></script>
<script at="Foot">
    $(function () {
        var optionsTexArea = document.getElementById('@Html.IdFor(x => x.Options)');
        var editor = CodeMirror.fromTextArea(optionsTexArea, {
            lineNumbers: false,
            matchBrackets: true,
            mode: { name: "javascript" }
    });
@{ 
    if (string.IsNullOrEmpty(Model.Options))
    {
        string fullOptions = @"{
    autogrow: true,
    btns: [
        [""viewHTML""],
        [""undo"", ""redo""],
        [""formatting""],
        [""fontsize"", ""fontfamily""],
        [""strong"", ""em"", ""del""],
        [""foreColor"", ""backColor""],
        [""superscript"", ""subscript""],
        [""link""],
        [""image""],
        [""align""],
        [""unorderedList"", ""orderedList""],
        [""horizontalRule""],
        [""removeformat""],
        [""preformatted""],
        [""table""],
        [""fullscreen""]
    ], 
    btnsDef: {
        align: {
            dropdown: [""justifyLeft"", ""justifyCenter"", ""justifyRight"", ""justifyFull""],
            ico: ""justifyLeft""
        },
        image: {
            dropdown: [""insertImage"", ""base64"", ""noembed""],
            ico: ""insertImage""
        }
    }
}";
<text>editor.setValue(`@Html.Raw(fullOptions)`);
        </text>
    }
}
    setTimeout(function() { editor.refresh(); },1);
});
</script>